(function(e){function t(t){for(var c,s,o=t[0],i=t[1],u=t[2],d=0,b=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&b.push(r[s][0]),r[s]=0;for(c in i)Object.prototype.hasOwnProperty.call(i,c)&&(e[c]=i[c]);l&&l(t);while(b.length)b.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],c=!0,o=1;o<n.length;o++){var i=n[o];0!==r[i]&&(c=!1)}c&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var c={},r={app:0},a=[];function s(t){if(c[t])return c[t].exports;var n=c[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=c,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)s.d(n,c,function(t){return e[t]}.bind(null,c));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],i=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=i;a.push([4,"chunk-vendors"]),n()})({0:function(e,t){},"072a":function(e,t,n){},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},15:function(e,t){},16:function(e,t){},17:function(e,t){},18:function(e,t){},19:function(e,t){},2:function(e,t){},3:function(e,t){},4:function(e,t,n){e.exports=n("56d7")},5:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var c=n("7a23"),r={class:"container mt-5 mb-5"},a={class:"row justify-content-md-center"},s={class:"col-md-6 col-sm-12"},o={class:"col-md-2 col-sm-12"},i={class:"row justify-content-md-center"},u={class:"col-md-8 col-sm-12"},l={key:1,class:"fa fa-ellipsis-h"};function d(e,t,n,d,b,j){var O=Object(c["H"])("Account"),h=Object(c["H"])("Ipfs"),p=Object(c["H"])("router-view"),f=Object(c["H"])("modals-container");return Object(c["z"])(),Object(c["g"])(c["a"],null,[Object(c["h"])("div",r,[b.isReady?(Object(c["z"])(),Object(c["g"])(c["a"],{key:0},[Object(c["h"])("div",a,[Object(c["h"])("div",s,[Object(c["k"])(O)]),Object(c["h"])("div",o,[Object(c["k"])(h)])]),Object(c["h"])("div",i,[Object(c["h"])("div",u,[Object(c["k"])(p)])])],64)):(Object(c["z"])(),Object(c["g"])("i",l))]),Object(c["k"])(f)],64)}var b=n("1da1"),j=(n("96cf"),n("b0c0"),{class:"card mb-2"}),O={class:"card-body"},h=Object(c["h"])("h4",{class:"card-heading"},"Account",-1),p=["value"],f=Object(c["h"])("br",null,null,-1),m={key:2,class:"alert alert-danger"};function g(e,t,n,r,a,s){return Object(c["z"])(),Object(c["g"])("div",j,[Object(c["h"])("div",O,[h,a.isReady?(Object(c["z"])(),Object(c["g"])(c["a"],{key:0},[Object(c["U"])(Object(c["h"])("select",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return a.account=e}),class:"form-select"},[(Object(c["z"])(!0),Object(c["g"])(c["a"],null,Object(c["F"])(a.accounts,(function(e,t){var n;return Object(c["z"])(),Object(c["g"])("option",{key:t,value:e.address},Object(c["L"])(e.meta.isTesting?"dev":"")+" "+Object(c["L"])(e.meta.name)+" | "+Object(c["L"])(null===(n=e.meta)||void 0===n?void 0:n.source),9,p)})),128))],512),[[c["P"],a.account]]),f,Object(c["j"])(" "+Object(c["L"])(a.account)+" | "+Object(c["L"])(s.balancePrint),1)],64)):(Object(c["z"])(),Object(c["g"])("button",{key:1,onClick:t[1]||(t[1]=function(){return s.connect&&s.connect.apply(s,arguments)}),class:"btn btn-default"},"connect")),a.error?(Object(c["z"])(),Object(c["g"])("p",m,Object(c["L"])(a.error),1)):Object(c["f"])("",!0)])])}n("4c53");var v=n("36ea"),y=n("0b67"),k=new v["b"]({endpoint:"wss://kusama.rpc.robonomics.network/"});k.setAccountManager(new v["a"](y["a"]));var w=k,x=n("1349"),z={data:function(){return{isReady:!1,account:null,accounts:[],unsubscribe:null,balance:"",error:""}},created:function(){var e=this;this.connect(),w.accountManager.onReady((function(){e.isReady=!0,console.log("allow"),console.log("polkadot-js",v["a"].checkAllow("polkadot-js")),console.log("talisman",v["a"].checkAllow("talisman")),console.log("subwallet-js",v["a"].checkAllow("subwallet-js"))})),setTimeout((function(){console.log("installed"),console.log("polkadot-js",v["a"].checkInstalled("polkadot-js")),console.log("talisman",v["a"].checkInstalled("talisman")),console.log("subwallet-js",v["a"].checkInstalled("subwallet-js"))}),1e3)},computed:{balancePrint:function(){return Object(x["a"])(this.balance,{decimals:w.api.registry.chainDecimals[0],withUnit:w.api.registry.chainTokens[0]})}},watch:{account:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.unsubscribe&&t.unsubscribe(),n.next=3,w.accountManager.selectAccountByAddress(e);case 3:return n.next=5,w.account.getBalance(e,(function(e){t.balance=e.free.sub(e.feeFrozen)}));case 5:t.unsubscribe=n.sent;case 6:case"end":return n.stop()}}),n)})))()}},methods:{connect:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.error="",t.prev=1,t.next=4,v["a"].initPlugin(w.accountManager.keyring,{isDevelopment:!1});case 4:e.accounts=w.accountManager.getAccounts(),e.accounts.length&&(e.account=e.accounts[0].address),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),e.error=t.t0.message;case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()}}},P=n("6b0d"),U=n.n(P);const C=U()(z,[["render",g]]);var L=C,D={class:"card mb-2"},R={class:"card-body"},A=Object(c["h"])("h4",{class:"card-heading"},"IPFS",-1);function M(e,t,n,r,a,s){return Object(c["z"])(),Object(c["g"])("div",D,[Object(c["h"])("div",R,[A,Object(c["h"])("h5",null,Object(c["L"])(a.status),1)])])}var N={data:function(){return{status:"Connecting",online:!1}},mounted:function(){this.getIpfsNodeInfo()},methods:{getIpfsNodeInfo:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$ipfs;case 3:n=t.sent,e.status="Connected",e.online=n.isOnline(),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.status="Error: ".concat(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}};const S=U()(N,[["render",M]]);var I=S,_={name:"App",components:{Account:L,Ipfs:I},data:function(){return{isReady:!1}},created:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,w.run();case 2:e.isReady=!0;case 3:case"end":return t.stop()}}),t)})))()}};n("f611");const H=U()(_,[["render",d]]);var V=H,F=n("6c02");function T(e,t,n,r,a,s){var o=Object(c["H"])("Devices");return Object(c["z"])(),Object(c["e"])(o)}var Q={class:"card mb-4"},B={class:"card-body"},E=Object(c["h"])("h4",{class:"card-title"},"Your subscription",-1),$={key:0},J={key:1},q={key:0},Y=Object(c["h"])("h3",null,"Your accounts",-1),G={class:"table-responsive"},K={class:"table"},W={scope:"row"},X={class:"d-lg-none"},Z={class:"d-none d-lg-block"},ee={class:"d-lg-none"},te={class:"d-none d-lg-block"},ne={class:"text-end"},ce={class:"btn-group",role:"group"},re=["onClick","disabled"],ae=Object(c["h"])("i",{class:"fa fa-send"},null,-1),se=[ae],oe=["onClick","disabled"],ie=["onClick"],ue=Object(c["h"])("i",{class:"fa fa-remove"},null,-1),le=[ue],de={class:"text-end"},be=Object(c["h"])("span",{class:"fa fa-plus"},null,-1),je=[be],Oe={colspan:"2",class:"text-end"},he=["disabled"],pe={key:0,class:"fa fa-ellipsis-h"},fe=Object(c["j"])("Save"),me={key:0,class:"alert alert-danger"};function ge(e,t,n,r,a,s){var o=Object(c["H"])("router-link");return Object(c["z"])(),Object(c["g"])("div",null,[Object(c["h"])("div",Q,[Object(c["h"])("div",B,[E,s.isActive?(Object(c["z"])(),Object(c["g"])("div",J,[Object(c["h"])("div",null,[Object(c["h"])("b",null,Object(c["L"])(s.countMonth)+" Month",1)]),Object(c["h"])("div",null,"Active till: "+Object(c["L"])(s.validUntilFormat),1)])):(Object(c["z"])(),Object(c["g"])("div",$,"Not active"))])]),s.isActive?(Object(c["z"])(),Object(c["g"])("div",q,[Y,Object(c["h"])("div",G,[Object(c["h"])("table",K,[Object(c["h"])("tbody",null,[(Object(c["z"])(!0),Object(c["g"])(c["a"],null,Object(c["F"])(a.devices,(function(e,t){return Object(c["z"])(),Object(c["g"])("tr",{key:t},[Object(c["h"])("td",W,[a.ha===e.address?(Object(c["z"])(),Object(c["e"])(o,{key:0,to:{name:"datalog",params:{address:e.address}}},{default:Object(c["T"])((function(){return[Object(c["h"])("span",X,Object(c["L"])(e.address.substr(0,5))+"..."+Object(c["L"])(e.address.substr(-5)),1),Object(c["h"])("span",Z,Object(c["L"])(e.address),1)]})),_:2},1032,["to"])):(Object(c["z"])(),Object(c["g"])(c["a"],{key:1},[Object(c["h"])("span",ee,Object(c["L"])(e.address.substr(0,5))+"..."+Object(c["L"])(e.address.substr(-5)),1),Object(c["h"])("span",te,Object(c["L"])(e.address),1)],64))]),Object(c["h"])("td",ne,[Object(c["h"])("div",ce,[a.ha!==e.address&&e.saved?(Object(c["z"])(),Object(c["g"])("button",{key:0,onClick:function(t){return s.launch(e.address)},class:"btn btn-primary",disabled:null===a.ha},se,8,re)):Object(c["f"])("",!0),e.saved?(Object(c["z"])(),Object(c["g"])("button",{key:1,onClick:function(t){return s.setHa(e.address)},class:"btn btn-info",disabled:a.ha===e.address},[Object(c["h"])("i",{class:Object(c["s"])(["fa",[a.ha===e.address?"fa-star":"fa-star-o"]])},null,2)],8,oe)):Object(c["f"])("",!0),Object(c["h"])("button",{onClick:function(t){return s.remove(e.address)},class:"btn btn-danger"},le,8,ie)])])])})),128)),Object(c["h"])("tr",null,[Object(c["h"])("td",null,[Object(c["U"])(Object(c["h"])("input",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return a.newDeviceAddress=e}),placeholder:"Address",class:Object(c["s"])(["form-control",{error:a.err}])},null,2),[[c["Q"],a.newDeviceAddress]])]),Object(c["h"])("td",de,[Object(c["h"])("button",{onClick:t[1]||(t[1]=function(){return s.add&&s.add.apply(s,arguments)}),class:"btn btn-success"},je)])]),Object(c["h"])("tr",null,[Object(c["h"])("td",Oe,[Object(c["h"])("button",{onClick:t[2]||(t[2]=function(){return s.save&&s.save.apply(s,arguments)}),class:"btn btn-primary",disabled:!a.hasEdit||a.process},[a.process?(Object(c["z"])(),Object(c["g"])("i",pe)):(Object(c["z"])(),Object(c["g"])(c["a"],{key:1},[fe],64))],8,he)])])])])]),a.error?(Object(c["z"])(),Object(c["g"])("div",me,Object(c["L"])(a.error),1)):Object(c["f"])("",!0)])):Object(c["f"])("",!0)])}n("d81d"),n("c740"),n("4de4"),n("d3b7");var ve=n("5d95"),ye=function(e){return Object(c["C"])("data-v-2572078d"),e=e(),Object(c["A"])(),e},ke=["onClick"],we=ye((function(){return Object(c["h"])("i",{class:"fa fa-remove"},null,-1)})),xe=[we],ze={class:"modal__content"};function Pe(e,t,n,r,a,s){var o=Object(c["H"])("Launch"),i=Object(c["H"])("vue-final-modal");return Object(c["z"])(),Object(c["e"])(i,Object(c["q"])(e.$attrs,{classes:"modal-container","content-class":"modal-content"}),{default:Object(c["T"])((function(e){var t=e.close;return[Object(c["h"])("button",{class:"btn modal__close",onClick:t},xe,8,ke),Object(c["h"])("div",ze,[Object(c["k"])(o,{address:n.address,sender:n.sender},null,8,["address","sender"])])]})),_:1},16)}var Ue=Object(c["h"])("h4",null,"Launch",-1),Ce={class:"mb-3"},Le=Object(c["h"])("label",{for:"platform",class:"form-label"},"Platform",-1),De={class:"mb-3"},Re=Object(c["h"])("label",{for:"name",class:"form-label"},"Name",-1),Ae=Object(c["h"])("h5",null,"Params",-1),Me=Object(c["h"])("span",{class:"input-group-text"},"Name",-1),Ne=["onUpdate:modelValue"],Se=Object(c["h"])("span",{class:"input-group-text"},"Value",-1),Ie=["onUpdate:modelValue"],_e=["onClick","disabled"],He=Object(c["h"])("i",{class:"fa fa-remove"},null,-1),Ve=[He],Fe={class:"text-end mb-3"},Te=Object(c["h"])("i",{class:"fa fa-plus"},null,-1),Qe=[Te],Be={class:"mb-3"},Ee={class:"container"},$e={class:"row justify-content-md-end"},Je={class:"col-md-2"},qe={class:"form-check"},Ye=Object(c["h"])("label",{class:"form-check-label",for:"isCrypto"},"crypto",-1),Ge={key:0},Ke=Object(c["h"])("h5",{class:"card-title"},"Your secret key for crypt message",-1),We={key:0,class:"alert alert-warning mt-2"},Xe={key:0,class:"alert alert-info"},Ze={key:1,class:"alert alert-danger"},et={class:"text-end"},tt=["disabled"],nt={key:0,class:"fa fa-ellipsis-h"},ct=Object(c["j"])("Send");function rt(e,t,n,r,a,s){return Object(c["z"])(),Object(c["g"])("div",null,[Ue,Object(c["h"])("div",null,[Object(c["h"])("div",Ce,[Le,Object(c["U"])(Object(c["h"])("input",{id:"platform","onUpdate:modelValue":t[0]||(t[0]=function(e){return a.platform=e}),placeholder:"",class:"form-control"},null,512),[[c["Q"],a.platform]])]),Object(c["h"])("div",De,[Re,Object(c["U"])(Object(c["h"])("input",{id:"name","onUpdate:modelValue":t[1]||(t[1]=function(e){return a.name=e}),placeholder:"",class:"form-control"},null,512),[[c["Q"],a.name]])]),Ae,(Object(c["z"])(!0),Object(c["g"])(c["a"],null,Object(c["F"])(a.params,(function(e,t){return Object(c["z"])(),Object(c["g"])("div",{class:"input-group mb-3",key:t},[Me,Object(c["U"])(Object(c["h"])("input",{"onUpdate:modelValue":function(t){return e.name=t},class:"form-control"},null,8,Ne),[[c["Q"],e.name]]),Se,Object(c["U"])(Object(c["h"])("input",{"onUpdate:modelValue":function(t){return e.value=t},class:"form-control"},null,8,Ie),[[c["Q"],e.value]]),Object(c["h"])("button",{onClick:function(e){return s.removeParam(t)},class:"btn btn-danger",disabled:0===t},Ve,8,_e)])})),128)),Object(c["h"])("div",Fe,[Object(c["h"])("button",{onClick:t[2]||(t[2]=function(){return s.addParam&&s.addParam.apply(s,arguments)}),class:"btn btn-success"},Qe)]),Object(c["h"])("div",Be,[Object(c["h"])("div",Ee,[Object(c["h"])("div",$e,[Object(c["h"])("div",Je,[Object(c["h"])("div",qe,[Object(c["U"])(Object(c["h"])("input",{"onUpdate:modelValue":t[3]||(t[3]=function(e){return a.isCrypto=e}),class:"form-check-input",type:"checkbox",id:"isCrypto"},null,512),[[c["O"],a.isCrypto]]),Ye])])])]),a.isCrypto?(Object(c["z"])(),Object(c["g"])("div",Ge,[Ke,Object(c["U"])(Object(c["h"])("input",{"onUpdate:modelValue":t[4]||(t[4]=function(e){return a.uri=e}),type:"password",class:"form-control",placeholder:"secret"},null,512),[[c["Q"],a.uri]]),s.validateUri?Object(c["f"])("",!0):(Object(c["z"])(),Object(c["g"])("div",We," Input your secret key ")),s.validateUri?Object(c["U"])((Object(c["z"])(),Object(c["g"])("input",{key:1,"onUpdate:modelValue":t[5]||(t[5]=function(e){return s.encryptMessage=e}),class:"form-control",disabled:""},null,512)),[[c["Q"],s.encryptMessage]]):Object(c["f"])("",!0)])):Object(c["f"])("",!0)]),a.message?(Object(c["z"])(),Object(c["g"])("div",Xe,Object(c["L"])(a.message),1)):Object(c["f"])("",!0),a.error?(Object(c["z"])(),Object(c["g"])("div",Ze,Object(c["L"])(a.error),1)):Object(c["f"])("",!0),Object(c["h"])("div",et,[Object(c["h"])("button",{onClick:t[6]||(t[6]=function(){return s.save&&s.save.apply(s,arguments)}),class:"btn btn-primary",disabled:a.process||!s.canSend},[a.process?(Object(c["z"])(),Object(c["g"])("i",nt)):(Object(c["z"])(),Object(c["g"])(c["a"],{key:1},[ct],64))],8,tt)])])])}var at=n("b85c"),st=(n("e9c4"),n("a434"),n("d9e2"),n("25f0"),n("f993")),ot=n("bc3a"),it=n.n(ot),ut=null;function lt(e){return dt.apply(this,arguments)}function dt(){return dt=Object(b["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!==ut){e.next=4;break}return e.next=3,Object(st["create"])(t);case 3:ut=e.sent;case 4:return e.abrupt("return",ut);case 5:case"end":return e.stop()}}),e)}))),dt.apply(this,arguments)}function bt(e,t){return jt.apply(this,arguments)}function jt(){return jt=Object(b["a"])(regeneratorRuntime.mark((function e(t,n){var c,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!==ut){e.next=2;break}throw new Error("ipfs not initialized");case 2:return c={path:t,content:n},e.next=5,ut.add(c);case 5:return r=e.sent,e.abrupt("return",r.cid.toString());case 7:case"end":return e.stop()}}),e)}))),jt.apply(this,arguments)}function Ot(e){return ht.apply(this,arguments)}function ht(){return ht=Object(b["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,it.a.get("https://ipfs.io/ipfs/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)}))),ht.apply(this,arguments)}var pt={install:function(e,t){e.config.globalProperties.$ipfs=lt(t)}},ft=n("e4fd"),mt=n("26af"),gt=n("19ef"),vt={props:["address","sender"],data:function(){return{platform:"",name:"",params:[],error:null,message:null,process:!1,isCrypto:!1,uri:""}},computed:{account:function(){if(this.uri)try{console.log(this.address);var e=new ft["a"],t=e.addFromUri(this.uri,{},"ed25519");if(console.log(Object(gt["a"])(this.address),Object(gt["a"])(t.address)),Object(gt["a"])(this.address)===Object(gt["a"])(t.address))return t;var n=e.addFromUri(this.uri,{},"sr25519");return console.log(Object(gt["a"])(this.address),Object(gt["a"])(n.address)),Object(gt["a"])(this.address)===Object(gt["a"])(n.address)?n:t}catch(c){console.log(c)}return null},validateUri:function(){return!(!this.account||Object(gt["a"])(this.address)!==Object(gt["a"])(this.account.address))},encryptMessage:function(){return this.validateUri?this.encrypt(this.getParameter()):""},canSend:function(){return!this.isCrypto||!(!this.validateUri||!this.encryptMessage)}},created:function(){this.params.push({name:"entity_id",value:""})},methods:{getParameter:function(){var e,t={},n=Object(at["a"])(this.params);try{for(n.s();!(e=n.n()).done;){var c=e.value;t[c.name]=c.value}}catch(a){n.e(a)}finally{n.f()}var r={platform:this.platform,name:this.name,params:t};return JSON.stringify(r)},save:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var n,c,r,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.message=null,e.error=null,e.process=!0,n=w.accountManager.account.address,t.prev=4,c=e.getParameter(),e.isCrypto&&e.validateUri&&(c=e.encryptMessage()),t.next=9,bt("launch",c);case 9:return r=t.sent,console.log("subscription",n),console.log("sender",e.sender),w.accountManager.useSubscription(n,e.sender),console.log("signer",w.accountManager.account.address),t.next=16,w.launch.send(e.address,v["c"].cidToHex(r));case 16:return a=t.sent,t.next=19,w.accountManager.signAndSend(a);case 19:s=t.sent,console.log(s),e.process=!1,e.message="Saved to block ".concat(s.blockNumber),t.next=30;break;case 25:t.prev=25,t.t0=t["catch"](4),console.log(t.t0),e.error=t.t0.message,e.process=!1;case 30:w.accountManager.setSender(n);case 31:case"end":return t.stop()}}),t,null,[[4,25]])})))()},addParam:function(){this.params.push({name:"",value:""})},removeParam:function(e){this.params.splice(e,1)},encrypt:function(e){var t=this.account.encryptMessage(e,this.account.publicKey);return Object(mt["a"])(t)}}};const yt=U()(vt,[["render",rt]]);var kt=yt,wt={props:["address","sender"],components:{Launch:kt}};n("caed"),n("a6eb");const xt=U()(wt,[["render",Pe],["__scopeId","data-v-2572078d"]]);var zt=xt,Pt={data:function(){return{owner:null,subscription:null,devices:[],newDeviceAddress:"",err:!1,error:null,process:!1,hasEdit:!1,ha:null}},computed:{countMonth:function(){if(null===this.subscription)return 0;var e=0;return this.subscription.kind.isDaily&&(e=this.subscription.kind.value.days.toNumber()),e/30},validUntil:function(){if(null===this.subscription)return!1;var e=this.subscription.issueTime.toNumber(),t=0;return this.subscription.kind.isDaily&&(t=this.subscription.kind.value.days.toNumber()),e+864e5*t},validUntilFormat:function(){return null===this.subscription?"-":new Date(this.validUntil).toLocaleString()},isActive:function(){return!0}},created:function(){var e=this;this.ha=localStorage.getItem("ha")||null,w.accountManager.account&&(this.owner=w.accountManager.account.address,this.loadLadger(),this.loadDevices()),this.unsubscribe=w.accountManager.onChange((function(t){e.subscription=null,e.owner=t.address,e.loadLadger(),e.loadDevices()}))},methods:{loadLadger:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,w.rws.getLedger(e.owner);case 2:n=t.sent,n.isEmpty||(e.subscription=n.value);case 4:case"end":return t.stop()}}),t)})))()},loadDevices:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,w.rws.getDevices(e.owner);case 2:n=t.sent,e.devices=n.map((function(e){return{address:e.toHuman(),saved:!0}}));case 4:case"end":return t.stop()}}),t)})))()},save:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var n,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.error=null,e.process=!0,t.prev=2,t.next=5,w.rws.setDevices(e.devices.map((function(e){return e.address})));case 5:return n=t.sent,t.next=8,w.accountManager.signAndSend(n);case 8:c=t.sent,console.log("saved block",c.block,c.tx),e.loadDevices(),e.process=!1,t.next=19;break;case 14:t.prev=14,t.t0=t["catch"](2),console.log(t.t0),e.error=t.t0.message,e.process=!1;case 19:e.hasEdit=!1;case 20:case"end":return t.stop()}}),t,null,[[2,14]])})))()},launch:function(e){this.$vfm.show({component:zt,bind:{address:this.ha,sender:e}})},add:function(){var e=this;this.err=!1,this.newDeviceAddress&&48===this.newDeviceAddress.length&&this.devices.findIndex((function(t){return t.address===e.newDeviceAddress}))<0&&Object(ve["a"])(this.newDeviceAddress,w.api.registry.chainSS58)[0]?(this.devices.push({address:this.newDeviceAddress,saved:!1}),this.newDeviceAddress="",this.hasEdit=!0):this.err=!0},remove:function(e){this.devices=this.devices.filter((function(t){return t.address!==e})),this.hasEdit=!0},setHa:function(e){localStorage.setItem("ha",e),this.ha=e}}};const Ut=U()(Pt,[["render",ge]]);var Ct=Ut,Lt={components:{Devices:Ct}};const Dt=U()(Lt,[["render",T]]);var Rt=Dt;function At(e,t,n,r,a,s){var o=Object(c["H"])("Datalog",!0);return Object(c["z"])(),Object(c["g"])("div",null,[Object(c["k"])(o,{address:n.address},null,8,["address"])])}var Mt={class:"mt-4"},Nt={class:"row"},St=Object(c["h"])("div",{class:"col-md-6"},[Object(c["h"])("h3",null,"Datalog")],-1),It={class:"col-md-6 text-end pt-2"},_t=Object(c["j"])("Back"),Ht={key:0,class:"text-center"},Vt=Object(c["h"])("i",{class:"fa fa-ellipsis-h"},null,-1),Ft=[Vt],Tt={key:1},Qt={class:"card mt-4 mb-4"},Bt={class:"card-body"},Et=Object(c["h"])("h4",{class:"card-title"},"Your secret key for decrypt message",-1),$t={key:0,class:"alert alert-warning mt-2"},Jt={class:"table"},qt={style:{width:"150px"}},Yt={class:"text-left"},Gt=["title"],Kt=["title"],Wt={style:{"max-height":"200px"}},Xt={key:0},Zt={class:"text-right",style:{width:"100px"}},en=["onClick","disabled"],tn={key:0,class:"fa fa-ellipsis-h"},nn=Object(c["j"])("read"),cn=["onClick"],rn={colspan:"3",class:"text-center"},an=["disabled"],sn=Object(c["j"])("   "),on=Object(c["j"])("   "),un=["disabled"];function ln(e,t,n,r,a,s){var o=Object(c["H"])("router-link"),i=Object(c["H"])("Pagination");return Object(c["z"])(),Object(c["g"])("div",Mt,[Object(c["h"])("div",Nt,[St,Object(c["h"])("div",It,[Object(c["k"])(o,{to:{name:"main"}},{default:Object(c["T"])((function(){return[_t]})),_:1})])]),a.isLoad?(Object(c["z"])(),Object(c["g"])("div",Ht,Ft)):Object(c["f"])("",!0),a.log.length?(Object(c["z"])(),Object(c["g"])("div",Tt,[Object(c["h"])("div",Qt,[Object(c["h"])("div",Bt,[Et,Object(c["U"])(Object(c["h"])("input",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return a.uri=e}),type:"password",class:"form-control",placeholder:"secret"},null,512),[[c["Q"],a.uri]]),s.validateUri?Object(c["f"])("",!0):(Object(c["z"])(),Object(c["g"])("div",$t," Input your secret key "))])]),Object(c["h"])("table",Jt,[Object(c["h"])("tbody",null,[Object(c["k"])(i,{size:5,listData:a.log,currentPage:a.currentPage},{default:Object(c["T"])((function(e){return[Object(c["h"])("tr",null,[Object(c["h"])("td",qt,Object(c["L"])(e.item[0]),1),Object(c["h"])("td",Yt,[null===e.item[2]?(Object(c["z"])(),Object(c["g"])("div",{key:0,title:e.item[1]},Object(c["L"])(e.item[1].substr(0,5))+"..."+Object(c["L"])(e.item[1].substr(-5)),9,Gt)):Object(c["f"])("",!0),e.item[2]&&null===e.item[3]?(Object(c["z"])(),Object(c["g"])("div",{key:1,title:e.item[2]},Object(c["L"])(e.item[2].substr(0,5))+"..."+Object(c["L"])(e.item[2].substr(-5)),9,Kt)):Object(c["f"])("",!0),Object(c["h"])("pre",Wt,[e.item[3]?(Object(c["z"])(),Object(c["g"])("code",Xt," "+Object(c["L"])(e.item[3])+" ",1)):Object(c["f"])("",!0)])]),Object(c["h"])("td",Zt,[null===e.item[2]&&"Qm"===e.item[1].substr(0,2)?(Object(c["z"])(),Object(c["g"])("button",{key:0,onClick:function(t){return s.readByIndex(e.item[5])},class:"btn btn-success",disabled:e.item[4]},[e.item[4]?(Object(c["z"])(),Object(c["g"])("i",tn)):(Object(c["z"])(),Object(c["g"])(c["a"],{key:1},[nn],64))],8,en)):Object(c["f"])("",!0),s.validateUri&&e.item[2]&&null===e.item[3]?(Object(c["z"])(),Object(c["g"])("button",{key:1,onClick:function(t){return s.decryptByIndex(e.item[5])},class:"btn btn-success"}," decrypt ",8,cn)):Object(c["f"])("",!0)])])]})),pagination:Object(c["T"])((function(e){return[Object(c["h"])("tr",null,[Object(c["h"])("td",rn,[Object(c["h"])("button",{disabled:0===e.pageNumber,onClick:t[1]||(t[1]=function(){return s.prevPage&&s.prevPage.apply(s,arguments)}),class:"btn btn-info"}," Previous ",8,an),sn,Object(c["h"])("b",null,Object(c["L"])(e.pageCount>0?e.pageNumber+1:0)+" / "+Object(c["L"])(e.pageCount),1),on,Object(c["h"])("button",{disabled:e.pageNumber>=e.pageCount-1,onClick:t[2]||(t[2]=function(){return s.nextPage&&s.nextPage.apply(s,arguments)}),class:"btn btn-info"}," Next ",8,un)])])]})),_:1},8,["listData","currentPage"])])])])):Object(c["f"])("",!0)])}n("ac1f"),n("5319"),n("5b81");var dn=n("d880");function bn(e,t,n,r,a,s){return Object(c["z"])(),Object(c["g"])(c["a"],null,[(Object(c["z"])(!0),Object(c["g"])(c["a"],null,Object(c["F"])(s.paginatedData,(function(t,n){return Object(c["G"])(e.$slots,"default",{key:n,item:t,index:n})})),128)),Object(c["G"])(e.$slots,"pagination",Object(c["t"])(Object(c["n"])({pageNumber:a.pageNumber,pageCount:s.pageCount})))],64)}n("a9e3"),n("fb6a");var jn={props:{listData:{type:Array,required:!0},currentPage:{type:Number,required:!1,default:0},size:{type:Number,required:!1,default:1}},data:function(){return{pageNumber:this.currentPage}},watch:{currentPage:function(e){this.pageNumber=e}},computed:{pageCount:function(){var e=this.listData.length,t=this.size;return Math.ceil(e/t)},paginatedData:function(){var e=this.pageNumber*this.size,t=e+this.size;return this.listData.slice(e,t)}}};const On=U()(jn,[["render",bn]]);var hn=On,pn={components:{Pagination:hn},props:["address"],data:function(){return{isLoad:!1,log:[],uri:"",currentPage:0}},created:function(){this.read()},computed:{account:function(){if(this.uri)try{var e=new ft["a"],t=e.addFromUri(this.uri,{},"ed25519");if(Object(gt["a"])(this.address)===Object(gt["a"])(t.address))return t;var n=e.addFromUri(this.uri,{},"sr25519");return Object(gt["a"])(this.address)===Object(gt["a"])(n.address)?n:t}catch(c){console.log(c)}return null},validateUri:function(){return!(!this.account||Object(gt["a"])(this.address)!==Object(gt["a"])(this.account.address))}},methods:{nextPage:function(){this.currentPage++},prevPage:function(){this.currentPage--},handlePage:function(e){this.currentPage=e},read:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoad=!0,t.next=3,w.datalog.read(e.address);case 3:n=t.sent,e.log=n.reverse().map((function(e,t){return[new Date(e[0].toNumber()).toLocaleString(),e[1].toHuman(),null,null,!1,t]})),e.isLoad=!1;case 6:case"end":return t.stop()}}),t)})))()},readByIndex:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.log[e][4]=!0,n.prev=1,n.next=4,Ot(t.log[e][1]);case 4:t.log[e][2]=n.sent,t.log[e][4]=!1,n.next=12;break;case 8:n.prev=8,n.t0=n["catch"](1),console.log(n.t0),t.readByIndex(e);case 12:case"end":return n.stop()}}),n,null,[[1,8]])})))()},decryptByIndex:function(e){try{var t=this.decrypt(this.log[e][2]);try{this.log[e][3]=JSON.stringify(JSON.parse(t.replaceAll("None","'None'").replaceAll("'",'"')),null,4)}catch(n){console.log(n),this.log[e][3]=t}}catch(n){console.log(n)}},decrypt:function(e){var t=this.account.decryptMessage(e,this.account.publicKey);return Object(dn["a"])(t)}}};const fn=U()(pn,[["render",ln]]);var mn=fn,gn={props:["address"],components:{Datalog:mn}};const vn=U()(gn,[["render",At]]);var yn=vn,kn=[{path:"/",name:"main",component:Rt},{path:"/datalog/:address",name:"datalog",component:yn,props:!0}],wn=Object(F["a"])({history:Object(F["b"])(),routes:kn}),xn=n("43df");Object(c["d"])(V).use(wn).use(xn["a"]).use(pt).mount("#app")},6:function(e,t){},7:function(e,t){},8:function(e,t){},9:function(e,t){},a6eb:function(e,t,n){"use strict";n("072a")},caed:function(e,t,n){"use strict";n("d62a")},d1bd:function(e,t,n){},d62a:function(e,t,n){},f611:function(e,t,n){"use strict";n("d1bd")}});
//# sourceMappingURL=app.5fcde879.js.map